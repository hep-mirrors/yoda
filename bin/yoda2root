#! /usr/bin/env python

"""\
%prog yodafile [rootfile]

Convert a YODA data file to the ROOT data format.
"""

import yoda, os, sys, optparse
from yoda.script_helpers import parse_x2y_args

parser = optparse.OptionParser(usage=__doc__)
opts, args = parser.parse_args()
INFILE, OUTFILE = parse_x2y_args(args, ".yoda", ".root")
if not INFILE or not OUTFILE:
    sys.stderr.write("You must specify the YODA and ROOT file names\n")
    sys.exit(1)

import ROOT
of = ROOT.TFile(OUTFILE, "recreate")
analysisobjects = yoda.readYODA(INFILE)
rootobjects = [yoda.to_root(ao) for ao in analysisobjects]
#print rootobjects
of.Write()
of.Close()
